## Hi, decided to call the data set Food_Sec, have loaded the entire data set and would then subset it to the columns we are working on.
## There was one Raw_Data.csv file aswell that had done this already but that didn't have all the observations
getwd()

```{r, results='markup'}
Food_Sec <- data.frame(read.csv("dec21pub.csv"))

str(Food_Sec)

FS_Subset <- subset(Food_Sec, HRINTSTA == 001 & HRSUPINT == 001)
FS_Subset <- subset(FS_Subset, select = c("HRHHID",	"GESTFIPS",	"HRNUMHOU",	"HEFAMINC",	"HESP1",	"PTDTRACE",	"PRCITSHP",	"PEMJNUM",	"PEHRUSL1",	"PEEDUCA", "HRFS12MD"))
```

## Installng tidyverse to use dplyr to rename the columns
install.packages('tidyverse')

```{r}
library(dplyr)
library(ezids)
library(ggplot2)
head(FS_Subset)
```

```{r, results='markup'}
FS_Subset <- FS_Subset %>% rename("Id" = "HRHHID", "States" = "GESTFIPS", "Family_Size" = "HRNUMHOU",	"Household_Income" = "HEFAMINC",	"SNAP" = "HESP1",	"Ethnicity" =	"PTDTRACE", "Citizenship_status" = "PRCITSHP",	"Number_of_Jobs" = "PEMJNUM",	"Hours_on_Jobs" = "PEHRUSL1" , "Education_Level" = "PEEDUCA" , "FoodSecurity_score" = "HRFS12MD")
```

```{r, results='markup'}
head(FS_Subset)
str(FS_Subset)

```



## Converting the all the columns to factors as they are all ordinal(except the Id, but since it's categorical i'm converting it into a factor too)

FS_Subset[] <- lapply( FS_Subset, factor)


str(FS_Subset)


##Exploring the Food Security Score

```{r, results='markup'}
summary(FS_Subset$'FoodSecurity_score')
```





ggplot(FS_Subset, aes(x=FoodSecurity_score, color =FoodSecurity_score, fill = FoodSecurity_score)) + geom_bar()

  
##1 :High Food Security, 2 : Marginal Food Security , 3 : Low Food Security, 4  : Very Low Food Security ,-9 : No Response
## Children’s Food Security Scale variables are coded as “Not in Universe” (-1) if there were no children in the household. 
## Attachment 17, on page 288, contains details about the food security score. I have only given it a cursory glace, but we will have to read it in detail.




```{r}
food_fc <- subset(Food_Sec, HUFINAL == 001)
head(food_fc)
food_final <- subset(food_fc, select = c("HRHHID",	"GTCO",	"GESTFIPS",	"HRNUMHOU",	"HEFAMINC",	"HESP1",	"PTDTRACE",	"PRCITSHP",	"PEMJNUM",	"PEHRUSL1",	"PEEDUCA", "HRFS12MD"))
str(food_final)
```

```{r data_ave, results='markup'}
food_ave <- subset(food_final, select = c("HRHHID",	"PEMJNUM",	"PEHRUSL1",	"PEEDUCA", "HRFS12MD"))
head(food_ave)

#Now I rename the columns

colnames(food_ave) <- c("ID", "No_of_jobs","Hours_of_job","Edcation_Level","Food_Seurity_Score")
xkabledply(food_ave, title = "Data set")
```
